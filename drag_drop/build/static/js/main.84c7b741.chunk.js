(this.webpackJsonpdrag_drop=this.webpackJsonpdrag_drop||[]).push([[0],{21:function(e,t,n){},26:function(e,t,n){},39:function(e,t,n){e.exports=n(75)},44:function(e,t,n){},45:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},46:function(e,t,n){},47:function(e,t,n){},48:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),o=n(22),r=n.n(o),i=(n(44),n(45),n(46),n(37)),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;return Object(i.a)(Array(e)).map((function(e){return(~~(36*Math.random())).toString(36)})).join("")},l=n(77),s=n(36),g=(n(47),n(5)),u=n(78),m="card",p="cardCreator",b=(n(48),function(e){var t=e.id?e.id:"cardCreator",n=Object(u.a)({item:{type:p,id:t},collect:function(e){return{isDragging:e.isDragging()}}}),a=Object(g.a)(n,2),o=a[0].isDragging,r=a[1];return e.shouldBeDraggable?c.a.createElement("div",{ref:r,className:o?"cardCreator dragging":"cardCreator"},e.content?e.content:"Drag and Drop on Canvas"):c.a.createElement("div",{className:"cardCreator",onClick:e.onClick},e.content?e.content:"Drag and Drop on Canvas")}),f=n(2),v=n(33),O=n(34),C=function(){function e(){Object(v.a)(this,e)}return Object(O.a)(e,[{key:"addState",value:function(t,n){e.states[t]=n}},{key:"getState",value:function(t){return e.states[t]}},{key:"addUpdater",value:function(t,n){e.updater[t]=n}},{key:"getUpdater",value:function(t){return e.updater[t]}},{key:"setActiveCard",value:function(t){e.activeCard=t}},{key:"getActiveCard",value:function(){return e.activeCard}},{key:"getAllState",value:function(){return e.states}},{key:"addCurrentlyDragging",value:function(t){e.currentlyDragging[t]=!0}},{key:"isCurrentlyDragging",value:function(t){return e.currentlyDragging[t]}},{key:"updateState",value:function(e,t){var n=this.getUpdater(e),a=this.getState(e);n?n(Object(f.a)(Object(f.a)({},a),a)):this.addState(e,t)}},{key:"removeCurrentlyDragging",value:function(t){e.currentlyDragging[t]&&delete e.currentlyDragging[t]}},{key:"deleteState",value:function(t){e.states[t]&&delete e.states[t]}},{key:"deleteUpdater",value:function(t){e.updater[t]&&delete e.updater[t]}},{key:"deleteStateAndUpdater",value:function(e){this.deleteState(e),this.deleteUpdater(e)}},{key:"returnComponentJson",value:function(){var t={},n=e.states;return Object.keys(n).map((function(e,a){n[e].id&&n[e].id.includes("card_component_")&&(t[e]=n[e])})),t}}]),e}();C.states={},C.updater={},C.activeCard="",C.currentlyDragging={};var j=new C,h=function(e){return c.a.createElement("div",{className:"sideBar"},c.a.createElement(b,{id:"sideBarComponent"+d(),shouldBeDraggable:!0}),c.a.createElement(b,{id:"sideBarComponent"+d(),shouldBeDraggable:!1,content:"Download JSON",onClick:function(){var e=JSON.stringify(j.returnComponentJson()),t=document.createElement("a"),n=new Blob([e],{type:"text/plain"});t.href=URL.createObjectURL(n),t.download="componentStates.json",document.body.appendChild(t),t.click()}}))},y=n(14),k=n(35),S=(n(26),n(79)),D=n(4),E={dimensions:[],placeholder:"Enter your content.",content:"",connectedFrom:null,connectedTo:null,position:[],disabled:!0,isConnectedToDragging:!1},A=function(e,t){return Object(D.atom)({key:"".concat(e),default:Object(f.a)(Object(f.a)(Object(f.a)({},E),t),{},{id:e})})},U=(Object(D.atom)({key:"cardStateListener",default:{listening:""}}),Object(D.atom)({key:"canvasComponentHolder",default:{components:{}}})),T=(n(21),n(8)),x=function(e){return c.a.createElement("div",{ref:e.dragRef,onDoubleClick:e.doubleClickHandler,onBlur:e.blurHandler,onClick:e.singleClickHandler,id:e.mainId,style:e.mainStyle,className:e.isDragging?"card cardDragging form-control cardSelected":"card form-control cardSelected"},c.a.createElement("div",{className:"functionHolder"},c.a.createElement("img",{src:"/delete.png",onClick:function(t){for(var n=j.getState("canvasComponentsHolder"),a=j.getUpdater("canvasComponentsHolder"),c={},o=Object.keys(n.components),r=0;r<o.length;r++){var i=n.components[o[r]];i.id!==e.mainId&&(c[o[r]]=i)}a({components:c}),j.deleteStateAndUpdater(e.mainId),t.stopPropagation()}}),c.a.createElement("img",{src:"/cancel.png",onClick:function(t){var n=j.getState(e.mainId),a=j.getUpdater(e.mainId);if(n.connectedTo){var c=j.getState(n.connectedTo);j.getUpdater(n.connectedTo)(Object(f.a)(Object(f.a)({},c),{},{connectedFrom:""})),a(Object(f.a)(Object(f.a)({},n),{},{connectedTo:""})),j.addState(n.id,Object(f.a)(Object(f.a)({},n),{},{connectedTo:""}))}t.stopPropagation()}})),c.a.createElement(T.ArcherElement,{id:e.archerId,relations:e.archerRelations},c.a.createElement("textarea",{className:"cardBody",type:"text",onChange:e.textOnChange,disabled:e.textAreaDisabled,value:e.textAreaValue})))},F=function(e){var t=e.id?e.id:"card_component";j.getState(t)&&function(e){var t=j.getState(e),n=j.getState("canvasComponentsHolder"),a=!1,c=t.connectedTo,o=t.connectedFrom,r={};Object.assign(r,t),c&&!n.components[c]&&(a=!0,r.connectedTo="",j.deleteStateAndUpdater(c)),o&&!n.components[o]&&(a=!0,r.connectedFrom="",j.deleteStateAndUpdater(o)),a&&j.getUpdater(e)(r)}(t);var n=Object(D.useRecoilState)(e.atom),a=Object(g.a)(n,2),o=a[0],r=a[1];j.addState(t,o),j.addUpdater(t,r);var i,d=Object(u.a)({item:{type:m,id:t},begin:function(e){if(o.connectedFrom){var t=j.getState(o.connectedFrom);j.getUpdater(o.connectedFrom)(Object(f.a)(Object(f.a)({},t),{},{isConnectedToDragging:!0}))}},end:function(e,t){if(o.connectedFrom){var n=j.getState(o.connectedFrom);j.getUpdater(o.connectedFrom)(Object(f.a)(Object(f.a)({},n),{},{isConnectedToDragging:!1}))}},collect:function(e){return{isDragging:e.isDragging()}}}),l=Object(g.a)(d,2),s=l[0].isDragging,p=l[1],b=document.getElementById(t),v=b?b.getBoundingClientRect():{width:0,height:0},O=document.getElementById("canvas"),C=Math.max(o.position.x-O.getBoundingClientRect().x-v.width/2,0),h=Math.max(o.position.y-v.height/2,0),y=t+"archer";if(!o.connectedTo||s||o.isConnectedToDragging)i={};else{var k=o.connectedTo+"archer",S=function(e,t){var n,a,c=j.getState(e),o=j.getState(t),r=c.position.x,i=c.position.y,d=r-o.position.x,l=i-o.position.y,s="left",g="right",u="top",m="bottom";return d<0?l<0?Math.abs(d)<Math.abs(l)?(n=m,a=u):(n=g,a=s):Math.abs(d)<Math.abs(l)?(n=u,a=m):(n=g,a=s):l<0?Math.abs(d)<Math.abs(l)?(n=m,a=u):(n=s,a=g):Math.abs(d)<Math.abs(l)?(n=u,a=m):(n=s,a=g),[n,a]}(t,o.connectedTo),E=Object(g.a)(S,2),A=E[0];i={targetId:k,targetAnchor:E[1],sourceAnchor:A,style:{strokeColor:"blue",strokeWidth:1,noCurves:!1}}}return c.a.createElement(x,{mainId:t,textOnChange:function(e){r(Object(f.a)(Object(f.a)({},o),{},{content:e.target.value}))},textAreaDisabled:o.disabled?"disabled":"",archerRelations:[i],isDragging:s,dragRef:p,doubleClickHandler:function(){j.setActiveCard(""),r(Object(f.a)(Object(f.a)({},o),{},{disabled:!1})),j.setActiveCard()},blurHandler:function(){j.setActiveCard(""),r(Object(f.a)(Object(f.a)({},o),{},{disabled:!0}))},singleClickHandler:function(e){var n=j.getActiveCard(),a={};if(Object.assign(a,o),n){if(n===t)return void j.setActiveCard("");var c=j.getState(n),i=j.getUpdater(n),d=c.connectedTo;i(Object(f.a)(Object(f.a)({},c),{},{connectedTo:t})),d&&d===o.connectedFrom?(c=j.getState(d),(i=j.getUpdater(d))(Object(f.a)(Object(f.a)({},c),{},{connectedFrom:"",connectedTo:""}))):(d&&(c=j.getState(d),(i=j.getUpdater(d))(Object(f.a)(Object(f.a)({},c),{},{connectedFrom:""}))),o.connectedFrom&&(c=j.getState(o.connectedFrom),(i=j.getUpdater(o.connectedFrom))(Object(f.a)(Object(f.a)({},c),{},{connectedTo:""})))),a.connectedFrom=n,j.setActiveCard("")}else j.setActiveCard(t);e.stopPropagation(),r(Object(f.a)(Object(f.a)({},a),{},{dimensions:[v.width,v.height]}))},mainStyle:{left:C,top:h,position:"absolute"},archerId:y,textAreaValue:o.content})},w=function(e){return c.a.createElement("div",{id:"canvas",className:"canvas",ref:e.componentRef,onClick:e.componentOnClick},c.a.createElement(T.ArcherContainer,null,Object.keys(e.components).map((function(t){var n=e.components[t];return c.a.createElement(F,Object.assign({},n,{key:n.id+"key"}))}))))},B=function(e){var t=Object(D.useRecoilState)(U),n=Object(g.a)(t,2),a=n[0],o=n[1];j.addState("canvasComponentsHolder",a),j.addUpdater("canvasComponentsHolder",o);var r=Object(S.a)({accept:[m,p],drop:function(e,t){if(e.type===p){var n="card_component_"+d();o({components:Object(f.a)(Object(f.a)({},a.components),{},Object(y.a)({},n,{id:n,atom:A(n,{content:"Double Click to Edit Content",position:t.getClientOffset()})}))})}else{var c=j.getState(e.id);j.getUpdater(e.id)(Object(f.a)(Object(f.a)({},c),{},{position:t.getClientOffset()}))}},collect:function(e){return{}}}),i=Object(g.a)(r,2);Object(k.a)(i[0]);var l=i[1];return c.a.createElement(w,{componentRef:l,componentOnClick:function(){j.setActiveCard("")},components:a.components})};var R=function(){return c.a.createElement(D.RecoilRoot,null,c.a.createElement(l.a,{backend:s.a},c.a.createElement(h,null),c.a.createElement(B,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[39,1,2]]]);
//# sourceMappingURL=main.84c7b741.chunk.js.map